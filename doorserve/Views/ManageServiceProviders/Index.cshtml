@model IEnumerable<doorserve.Models.ServiceProviderModel>
@using doorserve.Models
@using GridMvc.Html
@{
    ViewBag.Title = "Index";
    // Layout = "~/Views/Shared/_LayoutPage1.cshtml";
    // var Count = 1;
    int rowNumber = 0;
    int pageSize = 10;
    int pageNumber = Convert.ToInt32(ViewBag.PageNumber);
    if ((pageNumber) > 1)
    {
        rowNumber = (pageSize) * (pageNumber - 1) + rowNumber;
    }
}
<div class="panel-heading">
    <div class="row">
        <div class="col-lg-12">
            <div class="col-md-6">
                <h3 class="m-y-0">Manage Service Providers</h3>
            </div>
            <div class="col-md-6 ">
                <div class="pull-right">
                    @if (Permissions.Rights.ExcelExport)
                    {

                        using (Html.BeginForm("ExportToExcel", "ManageServiceProviders", FormMethod.Get, new { @class = "dis-inline" }))
                        {

                            @Html.Hidden("tabIndex", 'T')
                            <button type="submit" class="btn btn-primary"> Template</button>
                        }
                    }


                    @if (Permissions.Rights.ExcelExport)
                    {

                        using (Html.BeginForm("ExportToExcel", "ManageServiceProviders", FormMethod.Get, new { @class = "dis-inline" }))
                        {
                            @Html.Hidden("tabIndex", 'E')
                            <button class="btn btn-primary excel">
                                Export Excel
                            </button>

                        }
                    }



                    @if (Permissions.Rights.Create)
                    {


                        <a href="#" data-target="#UploadModel" data-toggle="modal" class="btn btn-primary">
                            Import

                        </a>
                        <a class="btn btn-primary" href="@Url.Action("Create", "ManageServiceProviders")">
                            <span>
                                Add ASP
                            </span>
                        </a>

                    }

                </div>
            </div>
        </div>
    </div>
</div>

<div class="panel-body">
    <div class="row">

        <div class=" col-md-12 code-cut x_content"   style="overflow-x: scroll;"  >
            @Html.Grid(Model).Columns(columns =>
       {
       columns.Add()
     .Titled("#SLN")
     .SetWidth(10)
     .RenderValueAs(o =>
     {
     rowNumber++;
     return @<text> @rowNumber </text>;
     });
             columns.Add(c => c.CompanyName).Titled("Company Name").Filterable(true);
           columns.Add(c => c.ProviderCode).Titled("ASP Code").Filterable(true);
           columns.Add(c => c.ProviderName).Titled("ASP Name").Filterable(true);
           columns.Add(c => c.ORGNAME).Titled("Organization Name").Filterable(true);
           columns.Add(c => c.IsActive).Titled("Is Active").Filterable(true);
           columns.Add(c => c.Remarks).Titled("Comments").Filterable(true);
           columns.Add(c => c.ModifyDate).Titled("Last Updated Date Time").Filterable(true);
           columns.Add(c => c.ModifyBy).Titled("Last Updated Details").Filterable(true);
           columns.Add().Titled("Action")
                      .Encoded(false)
                      .Sanitized(false)
                      .SetWidth(30)
                      .RenderValueAs(c => Html.ActionLink("Edit", "Edit", "ManageServiceProviders", new { id = c.ProviderId},null));

       }).Filterable(true).WithPaging(10).Sortable(true)

        </div>
    </div>
</div>



@*
           <div class="panel-body">

            columns.Add()
     .Titled("Action")
    .Sanitized(false)
     .Encoded(false)
     .RenderValueAs(data => new HtmlString
                 (
                    "<a href='#Editmodel' data-toggle='modal' class='btn btn-small btn-info btnSize'  onclick='EditCity(" + data.LocationId + ")'>Edit</a>"
                 )
         );


               <div class="row">
                   <div class="col-md-12">
                       <div class="x_content" style="overflow-x: scroll;">
                           @if (Permissions.Rights.View)
                           {
                               <table class="table table-striped table-bordered table-condensed" id="myTable">

                                   <thead>
                                       <tr>

                                           <th>
                                               @Html.DisplayName("#SN")
                                           </th>

                                           <th>
                                               @Html.DisplayName("ASP Code")
                                           </th>
                                           <th>
                                               @Html.DisplayName("ASP Name")
                                           </th>
                                           <th>
                                               @Html.DisplayName("Organization Name")
                                           </th>

                                           <th>
                                               @Html.DisplayName("Is Active")
                                           </th>
                                           <th>
                                               @Html.DisplayName("Comments")
                                           </th>
                                           <th>
                                               @Html.DisplayName("Last Updated Date Time")
                                           </th>
                                           <th>
                                               @Html.DisplayName("Last Updated Details")
                                           </th>

                                           <th>Action</th>
                                       </tr>
                                   </thead>
                                   @foreach (var item in Model)
                                   {
                                       <tr>
                                           <td>
                                               @Html.DisplayFor(modelItem => Count)
                                           </td>

                                           <td>
                                               @Html.DisplayFor(modelItem => item.ProviderCode)

                                           </td>
                                           <td>
                                               @Html.DisplayFor(modelItem => item.ProviderName)
                                           </td>
                                           <td>
                                               @Html.DisplayFor(modelItem => item.ORGNAME)
                                           </td>

                                           <td>
                                               @Html.DisplayFor(modelItem => item.IsActive)
                                           </td>

                                           <td>
                                               @Html.DisplayFor(modelItem => item.Remarks)
                                           </td>
                                           <td>
                                               @Html.DisplayFor(modelItem => item.ModifyDate)
                                           </td>
                                           <td>
                                               @Html.DisplayFor(modelItem => item.ModifyBy)
                                           </td>

                                           <td style="display: inline-flex">
                                               @if (Permissions.Rights.Edit)
                                               {
                                                   <a class="btn btn-small btn-info btnSize " href='@Url.Action("EDIT", "ManageServiceProviders", new { id = item.ProviderId })'>Edit</a>
                                               }
                                           </td>

                                       </tr>
                                       Count++;
                                   }
                               </table>
                           }
                           </div>
                       </div>
                       <!--/.panel
               </div><!--/.col-->
                   </div>
           </div>
*@
<div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="UploadModel" role="dialog" tabindex="-1" target="_blank">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-body mb-0 p-0">
                @using (Html.BeginForm("ImportProviders", "ManageServiceProviders", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    @Html.Action("_GetUploadForm")
                }
            </div>

        </div>
    </div>
</div>

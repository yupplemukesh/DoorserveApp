@model IEnumerable<TogoFogo.Models.AllData>

@{
    ViewBag.Title = "SPPLtable";
}
<div class="row">
	<div class="col-md-12 col-sm-12 col-xs-12">
		<div class="x_panel">
			<div class="x_title">
				<h2><small></small></h2>
				<ul class="nav navbar-right panel_toolbox">
					<li>
						<a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
					</li>

				</ul>
				<div class="clearfix"></div>
			</div>
			<div class="x_content" style="overflow-x:scroll">
				<br />
				<table class="table table-striped table-bordered table-condensed text-nowrap" id="myTable">
					<tr>
						<th>
							@Html.DisplayNameFor(model => model.ProcessName)
						</th>
						<th>
							@Html.DisplayName("Job Date")
						</th>
						<th>
							@Html.DisplayNameFor(model => model.JobNumber)
						</th>
						<th>
							@Html.DisplayNameFor(model => model.CC_NO)
						</th>
						<th>
							@Html.DisplayName("Is Current Repair Cost Approved?")
						</th>
						<th>
							@Html.DisplayName("Engineer Name")
						</th>
						<th>
							@Html.DisplayName("Total TAT")
						</th>
						<th>
							@Html.DisplayName("TAT")
						</th>
						<th>
							@Html.DisplayName("Device")
						</th>
						<th>
							@Html.DisplayName("Brand")
						</th>
						<th>
							@Html.DisplayName("Model")
						</th>
						<th>
							@Html.DisplayName("Spare Code")
						</th>
						<th>
							@Html.DisplayName("Spare Parts Name")
						</th>
						<th>
							@Html.DisplayName("Spare Parts Photos")
						</th>
						<th>
							@Html.DisplayName("Spare Parts Quantity")
						</th>
						<th>
							@Html.DisplayName("Spare Part Unit Price (INR)")
						</th>
						<th>
							@Html.DisplayName("Spare Part Amount (INR)")
						</th>
						<th>Action</th>
					</tr>


					@foreach (var item in Model)
					{
						var d = item.CC_NO;
					<tr>
						
						<td>
							@Html.DisplayFor(modelItem => item.ProcessName)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.JOBDate)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.JobNumber)
						</td>
						<td class="nr">

							@Html.DisplayFor(modelItem => item.CC_NO)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.IsRepairCostApproved)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.IsRepairCostApproved)
						</td>
						<td>
							@Html.Display("")
						</td>
						<td>
							@Html.Display("")
						</td>
						<td>
							@Html.Display("")
						</td>
						<td>
							@Html.Display("")
						</td>
						<td>
							@Html.Display("")
						</td>
						<td>
							@Html.Display("")
						</td>
						<td>
							@Html.Display("")
						</td>
						<td>
							@Html.Display("")
						</td>
						<td>
							@Html.Display("")
						</td>
						<td>
							@Html.Display("")
						</td>
						<td>
							@Html.Display("")
						</td>
						<td>
							@Html.ActionLink("Job Details", "SPPLForm", new { CC_NO = item.CC_NO },htmlAttributes: new { id = "myLink" }) |
							@*<button type="button" value="Job Details" id="myLink" />
							<button type="button" class="btn btn-info"  onclick="CCno(document.getElementById('CC_NO').value)">Search</button>*@
						</td>
					</tr>
					}

					</table>
			</div>
		</div>
	</div>
</div>

@section scripts{
	@*<script>
		$('#myLink').click(function () {

			alert("hello");
			debugger
			var $item = $(this).closest("tr")   // Finds the closest row <tr> 
				.find(".nr")     // Gets a descendent with class="nr"
				.text();  
			$.ajax({

				type: 'POST',
				url: "/RepairStatus/FindByCcNo?CcNO=" + $item,
				contentType: 'application/json; charset=utf-8',
				cache: false,
				success: function (response) {
					var Quan = 1;
					var trHTML = '';
					$.each(response.TableData1, function (i, item) {
						trHTML +=
							'<tr  id=databaseValues style="padding-top:5px"><td>' + item.TablespaceCC_NOField1 + '</td><td>' + item.TablespaceJobNumberField1 + '</td><td>' + item.TablespareTypeField1 + '</td><td>' + item.TablespareCodeField1 + '</td><td><img src="" id="foo" alt="" width=100 height=100></td><td id="PartName">' + item.TablespareNameField1 + '</td><td class="editableColumns" id="editableColumns">' + item.TablesparePriceField1 + '</td><td>' + item.TablespareQuantityField1 + '</td><td>' + item.TablespareTotalField1 + '</td><td>' + "<input class=editValues form-control type=button value=Edit style=margin-right:5px;;color:white;background-color:#31b0d5>" + "<input class=saveValues type=button value=Save style=background-color:green;color:white>" + '</td></tr>';
					});
					$('#test1').append(trHTML);
					var DamagedBoxImage = 'http://crm.togofogo.com/Uploaded Images/' + response.DamagedBoxImage;
					var url = 'http://crm.togofogo.com/Uploaded Images/' + response.PhotoOfDevice;
					$('#TRCInfoFull').val("Trc Name:" + response.TrcName + ",Mobile No:" + response.TrcMobile + " , Email:" + response.TrcEmail, " , Address:" + response.TrcAddress +
						", Pincode:" + response.TrcPinCode + " ,Location:" + response.TrcLocality + ", Near By Location :" + response.TrcNear_By_Location);
					$('#CustoFullInfo').val("Name:" + response.Customer_Name + ", Mobile No.:" + response.Mobile_No + ", E-Mail: " + response.Email_Id + ", Customer Address:" + response.Cust_Add +
						", Pincode" + response.Pincode + " City/Location:" + response.Cust_City + " , State:" + response.Cust_State);
					$('#ProcessName').val(response.TrcProcess_Name);
					$('#TRCCity').val(response.TRCCity);
					$('#TrcName').val(response.TrcName)
					$('#WarrentyStatus').val(response.WarrantyStatus);
					//$('#WarrentyExpiryDate').val(response.WarrantyExpiryDate.split(' ')[0]);
					$('#EstimatedCost').val(response.EstimatedCost);
					$('#WarrantyVoid').val(response.WarrantyVoid);
					$('#wipedevice').val(response.WipeDeviceData);
					$('#CostApproved').val(response.EstimatedCostApproved);
					$('#CourierName').val(response.CourierName);
					$('#ProblemObserved').val(response.PrblmObsrvd);
					$('#ProblemReported').val(response.Problem)
					$('#getCC_NO').val(response.CcNo);
					$('#Mobile_No').val(response.Mobile_No);
					$('#Brand').val(response.Brand);
					$('#ServiceProviderName').val(response.ServiceProviderName);
					$('#Cust_Add').val(response.Cust_Add);
					$('#Cust_City').val(response.Cust_City);
					$('#Cust_State').val(response.Cust_State);
					$('#CustomerId').val(response.CustomerId);

					$('#Customer_Name').val(response.Customer_Name);
					$('#Email_Id').val(response.Email_Id);
					$('#Model').val(response.Model);
					$('#Pickup_Date').val(response.Pickup_Date);
					$('#Pincode').val(response.Pincode);
					$('#Problem').val(response.Problem);
					$('#StatusName').val(response.StatusName);
					$('#SubCatName').val(response.SubCatName);
					$('#Serial_No').val(response.Serial_No);
					$('#IMEI1').val(response.IMEI1);
					$('#IMEI2').val(response.IMEI2);
					$('#BtryRemovable').val(response.BtryRemovable);
					$('#BtryReq').val(response.BtryReq);
					$('#IsDiffDeviceRecvd').val(response.IsDiffDeviceRecvd);
					$('#IsDiffDeviceRecvd').val(response.IsDiffDeviceRecvd);
					$('#RecvdBrand').val(response.RecvdBrand);
					$('#RecvdModel').val(response.RecvdModel);
					$('#IsPhyDamage').val(response.IsPhyDamage);
					$('#ReceiveDate').val(response.ReceiveDate);
					$('#RecvRemarks').val(response.RecvRemarks);
					$('#EnggName').val(response.EnggName);
					$('#BtryReceived').val(response.BtryReceived);
					$('#BtryBrandAndModel').val(response.BtryBrandAndModel);
					$('#DeviceTUPC').val(response.DeviceTUPC);
					$('#RecvdSerialNo').val(response.RecvdSerialNo);
					$('#RecvdIMEI1').val(response.RecvdIMEI1);
					$('#RecvdIMEI2').val(response.RecvdIMEI2);
					$('#ReceiveApprovalNeeded').val(response.ReceiveApprovalNeeded);
					$('#RecvApprovalStatus').val(response.RecvApprovalStatus);
					$('#RecvApprovedBy').val(response.RecvApprovedBy);
					$('#PhotoOfDevice').attr('src', url);
					$('#DamagedBoxImage').attr('src', DamagedBoxImage);
					$('#ReceivedDevice').val(response.RecvdDevice);

					$('#ApproverRemarks').val(response.ApproverRemarks);
					$('#IsApproveforReceivingDevice').val(response.IsApproveforReceivingDevice);
					$('#JobNumber').val(response.JobNumber);
					$('#CallStatus').val(response.CallStatus);
					$('#Pfels_Engg_Name').val(response.PfelsEngineerName);
					$('#WarrantyStickerTempered').val(response.WarrantyStickerTempered);
					$('#OS_SoftwareReinstall').val(response.OS_SoftwareReinstall);
					$('#CurrentStatus').val(response.CurrentStatus);
					$('#DeviceWaterDamaged').val(response.DeviceWaterDamaged);
					$('#WarrantyVoid').val(response.WarrantyVoid);
					$('#PfelsProblemFound').val(response.PfelsProblemFound);
					$('#OS_Software_Reinstall').val(response.OS_Software_Reinstall);
					$('#Customer_Data_Backup').val(response.Customer_Data_Backup);
					$('#Current_OS_Software_Name').val(response.Current_OS_Software_Name);
					$('#Installed_OS').val(response.Installed_OS);
					$('#DeviceWarrantyVoid').val(response.DeviceWarrantyVoid);
					$('#JOBDate').val(response.JOBDate);
					$('#EngineerRemarks').val(response.EngineerRemarks);
					$('#DeviceServiceCharge').val(response.DeviceServiceCharge);
					$('#Prcc_Is_Repair_Cost_Approved').val(response.Prcc_Is_Repair_Cost_Approved);
					$('#Prcc_Callback_Date_and_Time').val(response.Prcc_Callback_Date_and_Time);
					$('#Prcc_EMail_SMS_Message_To_Customer').val(response.Prcc_EMail_SMS_Message_To_Customer);
					$('#Prcc_Advance_Payment_Amount').val(response.Prcc_Advance_Payment_Amount);
					$('#Prcc_Send_Company_Bank_Account_Details').val(response.Prcc_Send_Company_Bank_Account_Details);
					$('#Prcc_Is_Customer_wants_to_pay_Advance').val(response.Prcc_Is_Customer_wants_to_pay_Advance);
					$('#Prcc_Customer_Support_Remarks').val(response.Prcc_Customer_Support_Remarks);
					$('#ApprovedSpareCost').val(response.ApprovedSpareCost);
					$('#BoxCondition').val(response.BoxCondition);
					$('#ReceivingDoc').val(response.ReceivingDocument);
					$('#Returnable').val(response.IsReturnable);
					$('#NoOfBoxesReceived').val(response.NoOfBoxesReceived);
				},
				error: function (e) {
					console.log(e);
					$(".submitbutton").attr("disabled", false);
					alert("Something went wrong...");

				},
				complete: function () {

					$(".submitbutton").attr("disabled", false);
				}
			});
		});
		
		
	</script>*@
	}


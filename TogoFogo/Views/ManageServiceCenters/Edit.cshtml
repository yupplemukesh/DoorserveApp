@model TogoFogo.Models.ServiceCenterModel
@{
    ViewBag.Title = "Edit Client";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";
}

    <div class="panel-heading">

        <h3 class="m-y-0">Edit Service Center</h3>

    </div>
    <div class="panel-body">

        @Html.Partial("_CreateEditCenterForm", Model)
    </div>





<div class="modal fade" id="BankModel" role="dialog" tabindex="-1">
    <div class="modal-dialog modal-lg">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header  bg-primary">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Bank Details</h4>
            </div>
            @using (Html.BeginForm("AddOrEditBank", "ManageServiceCenters", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                <div class="modal-body" id="BankInfo">

                </div>
            }
            </div>

    </div>
</div>

<div class="modal fade" id="ContactModel" role="dialog" tabindex="-1">
    <div class="modal-dialog modal-lg">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header  bg-primary">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Contact Details </h4>
            </div>
            @using (Html.BeginForm("AddOrPersonContactDetails", "ManageServiceCenters", FormMethod.Post, new { enctype = "multipart/form-data", }))
            {
                <div class="modal-body" id="ContactInfo">

                </div>
            }
            </div>
    </div>
</div>
@section scripts{


    @Scripts.Render("~/bundles/jqueryval")
    <script>



            var DivName = $('.nav-tabs .active a').attr('href');
            console.log(DivName);
            activaTab(DivName);


        function activaTab(tab) {

            $(tab).addClass("active in");
        };
        function AjaxWithValue(method, ddl, e) {
            var val = e.value;
            if (ddl == "ConAddress_StateId")
                $("#ConAddress_CityId").empty();
            $.ajax({
                type: "GET",
                url: "/DropdownBind/" + method + "?value=" + val,
                data: '{}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $("#" + ddl).empty();

                    //var sel = new Option('-Select-', '');
                    //$('#' + ddl).append(sel);
                    for (var i = 0; i < data.length; i++) {
                        var opt = new Option(data[i].Text, data[i].Value);
                        $('#' + ddl).append(opt);
                    }
                }
            });
        }
        $("#IsUser").change(function (e) {
            if ($(this).prop("checked")) {
                $("#userDetails").show();
            }
            else {
                $("#userDetails").hide();
            }

        })
            $(".reset").click(function () {
                $(this).closest('form').find("input[type=text], textarea,select").val("");
                $("#ConCity").empty();
                $("#ConState").empty();
                $(this).closest('form').find("input[type=checkbox]").prop('checked', false);
                $('.selectpicker').selectpicker('refresh');
            });

            $('a[data-toggle="tab"]').click(function (e) {
            if ($(this).hasClass("disabled")) {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                return false;

            }
        });

        function AddOrEditContact(contact) {           
            var CenterId = $("#CenterId").val();
            $.ajax({
                type: 'GET',
                url: '@Url.Action("AddorUpdateContact", "manageServiceCenters")',
                contentType: 'application/json; charset=utf-8',
                cache: false,
                data: { model: JSON.stringify(contact) },
                success: function (response) {
                    $("#ContactInfo").html(response);                   
                    $("#RefKey").val(CenterId);
                  
                },
                error: function (e) {
                    console.log(e);
                
                    alert("Something went wrong...");

                },
                complete: function () {

                    $(".submitbutton").attr("disabled", false);
                }
            });
        };


        function AddOrEditBank(bank) {
            var CenterId = $("#CenterId").val();            
            $.ajax({
                type: 'GET',
                url: '@Url.Action("AddorEditBankDetails", "manageServiceCenters")',
                contentType: 'application/json; charset=utf-8',
                cache: false,
                data: bank,
                success: function (response) {                    
                    $("#BankInfo").html(response);
                    $("#RefKey").val(CenterId);
                    if (bank.bankId != null) 
                        $("#Action").val('U');
                    else
                        $("#Action").val('I');
                },
                error: function (e) {
                    console.log(e);
                  
                    alert("Something went wrong...");

                },
                complete: function () {

          
                }
            });
        };


    </script>


}





